<!DOCTYPE html>
<html>
<head>
<title>http request test forms</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
<script type="text/javascript">
	$().ready(function(){
		$("#usermessage").submit(function() {
			$("#results").prepend(
				"<div><a href=\"" + "update.php?"+$(this).serialize() + "\">simulate chat</a></div>" );
			//alert($(this).serialize());
			return false;
		});
		
		$("#userconnect").submit(function() {
				$("#results").prepend(
					"<div><a href=\"" + "update.php?"+$(this).serialize()+"\">simulate connection</a></div>");
				//alert($(this).serialize());
				return false;
			});
			
		$.getJSON("serverlist.php?"/*,{ owner_id : "1" }*/, function(data){
				for ( var i = 0; i < data.length; i++ ) {
					$('select[id][name^="serverip"]').append( new Option( data[i].title ,data[i].ip ));
				}
				
			});
			
		$("#severipedituseraccess").change(function(){
				$.getJSON("playerlist.php?", { serverip: this.value}, function(data){
						//Get player list from server
						alert(data.length);
						for (var i = 0; i < data.length; i++ )
						{
							$('select[id][name^="serverknown"]').append( new Option( data[i].name, data[i].id ));
						}
					});
			});
	});
</script>
<style type="text/css">
	#results{
		border: 2px solid red;
	}
</style>
</head>
<body>
<div>
<fieldset>
<legend>Simulate Chat</legend>
<form id="usermessage">
<input type="hidden" name="action" value="message" />
<label for="serveripmessage">Server</label><select id="serveripmessage" name="serverip"></select>
<label for="playermessage">Player</label><input type="text" id="playermessage" name="player" value="cppmonkey" />
<label for="message">Message</label><input type="text" id="message" name="message" value="Ajax test" />
<input type="submit" />
</form>
</fieldset>
<fieldset>
<legend>Simulate Connection</legend>
<form id="userconnect">
<input type="hidden" name="action" value="connect" />
<label for="serveripconnect">Server</label><select id="serveripconnect" name="serverip"></select>
<label for="playerconnect">Player</label><input type="text" id="playerconnect" name="player" value="cppmonkey" />
<label for="isVip">isVip</label><input type="checkbox" id="isVip" name="vip" />
<label for="isAdmin">isAdmin</label><input type="checkbox" id="isAdmin" name="admin" />
<input type="submit" />
</form>
</fieldset>
<fieldset>
<legend>Add User</legend>
<form id="adduser">
<input type="hidden" name="action" value="" />
<select id="severipadduser" name="serverip"></select>
</form>
</fieldset>
<fieldset>
<legend>Edit User Access</legend>
<form id="edituseraccess">
<input type="hidden" name="action" value="" />
<select id="severipedituseraccess" name="serverip"></select>
<select id="serverknownusersedituseraccess" name="serverknownusers" size="7" multiple="multiple"></select>
<input name="isVip" type="checkbox" />
<input name="isAdmin" type="checkbox" />
<input name="canBuild" type="checkbox" />
<input name="canIgnite" type="checkbox" />
<input type="submit" />
</form>
</fieldset>
<div id="results" class="results">
</div>
</body>
</html>